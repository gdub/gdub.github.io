<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Gary Wilson Jr. - 14</title><link href="https://gdub.github.io/thegarywilson.com/" rel="alternate"></link><link href="https://gdub.github.io/thegarywilson.com/feeds/14.atom.xml" rel="self"></link><id>https://gdub.github.io/thegarywilson.com/</id><updated>2011-07-14T00:00:00-05:00</updated><entry><title>Fix Samsung Captivate (Galaxy S) battery life after update to Android 2.2 (Froyo)</title><link href="https://gdub.github.io/thegarywilson.com/blog/2011/fix-samsung-captivate-galaxy-s-battery-life-after-update-to-android-22-froyo/" rel="alternate"></link><published>2011-07-14T00:00:00-05:00</published><updated>2011-07-14T00:00:00-05:00</updated><author><name>Gary</name></author><id>tag:gdub.github.io,2011-07-14:/thegarywilson.com/blog/2011/fix-samsung-captivate-galaxy-s-battery-life-after-update-to-android-22-froyo/</id><summary type="html">&lt;div class="section" id="the-update"&gt;
&lt;h2&gt;The Update&lt;/h2&gt;
&lt;p&gt;Finally, &lt;a class="reference external" href="http://www.samsung.com/us/froyoupgrade2_2/captivate"&gt;Samsung has released&lt;/a&gt; the &lt;a class="reference external" href="http://developer.android.com/sdk/android-2.2-highlights.html"&gt;Android 2.2 Froyo&lt;/a&gt; update for the Galaxy S (&lt;a class="reference external" href="http://www.amazon.com/gp/redirect.html?ie=UTF8&amp;amp;location=http%3A%2F%2Fwww.amazon.com%2FSamsung-Captivate-Android-Phone-AT%2Fdp%2FB003TLMQG8%2F&amp;amp;tag=listfrenzy-20&amp;amp;linkCode=ur2&amp;amp;camp=1789&amp;amp;creative=9325"&gt;AT&amp;amp;T Captivate&lt;/a&gt;). For reference, before the update I was getting about one-and-a-half days of battery life with normal usage (wi-fi and sync always on). Android 2.2 touts a 2x-5x improvement in CPU …&lt;/p&gt;&lt;/div&gt;</summary><content type="html">&lt;div class="section" id="the-update"&gt;
&lt;h2&gt;The Update&lt;/h2&gt;
&lt;p&gt;Finally, &lt;a class="reference external" href="http://www.samsung.com/us/froyoupgrade2_2/captivate"&gt;Samsung has released&lt;/a&gt; the &lt;a class="reference external" href="http://developer.android.com/sdk/android-2.2-highlights.html"&gt;Android 2.2 Froyo&lt;/a&gt; update for the Galaxy S (&lt;a class="reference external" href="http://www.amazon.com/gp/redirect.html?ie=UTF8&amp;amp;location=http%3A%2F%2Fwww.amazon.com%2FSamsung-Captivate-Android-Phone-AT%2Fdp%2FB003TLMQG8%2F&amp;amp;tag=listfrenzy-20&amp;amp;linkCode=ur2&amp;amp;camp=1789&amp;amp;creative=9325"&gt;AT&amp;amp;T Captivate&lt;/a&gt;). For reference, before the update I was getting about one-and-a-half days of battery life with normal usage (wi-fi and sync always on). Android 2.2 touts a 2x-5x improvement in CPU performance and improved memory management, both contributing to faster and smoother performance.&lt;/p&gt;
&lt;p&gt;Sold! Where do I upgrade?&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="the-aftermath"&gt;
&lt;h2&gt;The Aftermath&lt;/h2&gt;
&lt;p&gt;Unfortunately, shortly after installing the update I notice an unacceptable battery drain rate. From a full change and with, at most, 10 minutes of use, my battery was dead about eight hours later. Wait a second, I thought performance was supposed to be better! Did this improved performance mean I had to sacrifice to the battery gods? This is not at all what I signed up for.&lt;/p&gt;
&lt;p&gt;Maybe the first charge cycle was a fluke, I told myself. Well, it wasn't.  Two more charge cycles came and went, and I was still experiencing no more than about eight to ten hours of battery life.  At this point, I'm searching Android forums for solutions and finding many similar battery life horror stories.  It wasn't just Samsung Galaxy phones either. Reports about other HTC, Samsung, etc. phones were also prevalent. However, I could find no definitive solution to the problem.  Suggestions ranged everywhere from get a new battery to perform a factory reset to turn off wi-fi and many, many more.  At this point, I'm seriously considering reverting back to Android 2.1 (or rooting and going to 2.3.4), because less than half a day's worth a battery is no way to live.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="the-solution"&gt;
&lt;h2&gt;The Solution&lt;/h2&gt;
&lt;p&gt;Then, there was one suggested solution I came across that actually seemed plausible.  I'm sure as hell not going to reset the phone and spend the time reloading all my data and apps, and nothing is wrong with my 6-month old battery as it was working just fine before the update to 2.2.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The suggested solution was to reset the battery calibration table.&lt;/strong&gt; The theory here was that the software estimates the battery usage and life, and is what tells the phone what percentage the battery is at and when the phone should shut down due to critically-low remaining capacity. By reseting the calibration table, the software would relearn the battery capacity.  OK, I buy that, so how do I do this? Well, the suggestion was to install the &lt;a class="reference external" href="https://play.google.com/store/apps/details?id=com.vertiform.android.app.batteryspy"&gt;Battery Spy&lt;/a&gt; app, open the app, then follow: Menu button -&amp;gt; Battery Profile -&amp;gt; Reset calibration table -&amp;gt; Yes. Afterwards, you must let the battery drain all the way down, then charge it back to full (I did this with the phone off), and then let it charge all the way down again.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="the-numbers"&gt;
&lt;h2&gt;The Numbers&lt;/h2&gt;
&lt;p&gt;Once changed to full, I performed a couple more actions: I turned off auto -sync and also changed the wi-fi sleep policy option to turn off wireless when the screen is inactive (Menu -&amp;gt; Settings -&amp;gt; Wireless and network -&amp;gt; Wi-Fi settings -&amp;gt; Menu -&amp;gt; Advanced -&amp;gt; Wi-Fi sleep policy -&amp;gt; When screen turns off).  The last option here is a default policy that was changed in Android 2.2; previously, &amp;quot;When screen turns off&amp;quot; was the default, but in 2.2 the default changed to &amp;quot;Never&amp;quot;. From what I could gather, the &amp;quot;When screen turns off&amp;quot; setting was a problem because if the phone sat idle (e.g. while you were asleep) it would switch to 3G (even if it had excellent wi-fi signal) and potentially rack up unintended data usage. Another reason for the settings change, again from what I could gather, was that the wi-fi transmitter uses less power than the cell radio, and less power = more battery life.&lt;/p&gt;
&lt;p&gt;To my astonishment, &lt;strong&gt;4 days 22 hours and 14 minutes&lt;/strong&gt; later the phone was down to 2% battery, but still on despite normal usage and not ever going near a charger.  Wow, this is unbelievable!  Nearly five days of charge, that was more than twice the battery life I've ever experienced on this phone; but, was this due to the battery calibration or the settings I changed?  Time to test. I next charged the phone up to 100% again, then turned auto-sync back on.  1 day 20 hours and 45 minutes later, battery is at 5%.  OK, big hit there, but still better than I had ever experienced before the upgrade to Android 2.2.  Next, I changed fully once more, and then set the wi-fi sleep policy back to &amp;quot;Never&amp;quot;. That time, 2 days 6 hours and 11 minutes later, it's at 4% charge.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="conclusion"&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Your mileage may vary, but it seems that the battery calibration is what did the trick. At over two days of average battery life now, I'm once again a happy Android user and am enjoying a bit faster performance to boot.  Before I wrap this up, I'll leave you with one last tip: the &lt;a class="reference external" href="https://play.google.com/store/apps/details?id=com.bvalosek.cpuspy"&gt;CPU Spy&lt;/a&gt; app. This nice little app gives you a breakdown of how much time the CPU has spent in its various clock speeds (e.g. 1000, 800, 400, 200, and 100 MHz, and deep sleep), and the far majority of the phone's time should be in the deep sleep mode.  If it's not, then there's likely some app or background process that is keeping the phone from entering this low-power state.  Find out what's keeping it out of deep sleep, and your battery will thank you.  Hope this was helpful, and I would definitely try the battery recalibration before taking more drastic measures that involve losing all your apps and data.&lt;/p&gt;
&lt;/div&gt;
</content><category term="14"></category><category term="android"></category><category term="at&amp;t"></category><category term="battery"></category><category term="captivate"></category><category term="froyo"></category><category term="galaxy s"></category><category term="samsung"></category></entry><entry><title>Drawing Petri nets</title><link href="https://gdub.github.io/thegarywilson.com/blog/2011/drawing-petri-nets/" rel="alternate"></link><published>2011-03-14T00:00:00-05:00</published><updated>2011-03-14T00:00:00-05:00</updated><author><name>Gary</name></author><id>tag:gdub.github.io,2011-03-14:/thegarywilson.com/blog/2011/drawing-petri-nets/</id><summary type="html">&lt;p&gt;I recently went looking for tools to easily draw &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Petri_net"&gt;Petri nets&lt;/a&gt;, a modeling language for distributed systems, and here's what I found:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://www.ctan.org/tex-archive/macros/generic/petri-nets/"&gt;petri-nets LaTeX package&lt;/a&gt;: A LaTeX package written by Franck Pommereau specifically for drawing Petri nets that makes use of &lt;a class="reference external" href="http://www.tug.org/PSTricks/main.cgi/"&gt;PSTricks&lt;/a&gt; as a basis for the actual creation of …&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;I recently went looking for tools to easily draw &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Petri_net"&gt;Petri nets&lt;/a&gt;, a modeling language for distributed systems, and here's what I found:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://www.ctan.org/tex-archive/macros/generic/petri-nets/"&gt;petri-nets LaTeX package&lt;/a&gt;: A LaTeX package written by Franck Pommereau specifically for drawing Petri nets that makes use of &lt;a class="reference external" href="http://www.tug.org/PSTricks/main.cgi/"&gt;PSTricks&lt;/a&gt; as a basis for the actual creation of the drawings. I didn't actually try this package out because, after skimming through the documentation, it seems that nodes must be positioned using the &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Cartesian_coordinate_system"&gt;Cartesian coordinate system&lt;/a&gt;. Not really what I'm looking for since, ideally, I'd like to be able to simply define the graph's structure and not have to worry about explicitly positioning each object.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://www.ctan.org/tex-archive/help/Catalogue/entries/pgf.html"&gt;PGF (&amp;quot;portable graphics format&amp;quot;) LaTeX package&lt;/a&gt;: A LaTeX package for creating graphics, similar to PStricks. Unlike PStricks, this package has built-in support for Petri nets. It provides out-of-the box support for defining place and transition nodes, drawing edges, and placing a defined number of tokens within a node.  If interested, Section 3 of the &lt;a class="reference external" href="http://mirror.ctan.org/graphics/pgf/base/doc/generic/pgf/pgfmanual.pdf"&gt;PGF manual&lt;/a&gt; provides an excellent and detailed tutorial on building a Petri net graph. While the syntax for describing a graph seems easier than the petri-nets package above, there are still cumbersome aspects to the definition. For example, positioning is still a bit of a manual process. You must specify &amp;quot;left of&amp;quot;, &amp;quot;right of&amp;quot;, &amp;quot;above of&amp;quot;, and &amp;quot;below of&amp;quot; layout commands for each node, though at least you do not have to deal with coordinates. Now granted, precise layout might be exactly what's needed in a LaTeX document, but I'm looking for something easier and faster to define.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;a class="reference external" href="http://www.graphviz.org/"&gt;Graphviz&lt;/a&gt;: visualization software that can auto-generate directed graphs a specification given in its &lt;a class="reference external" href="http://www.graphviz.org/content/dot-language"&gt;DOT language&lt;/a&gt;.  It's easy to create the place and transition nodes using subgraph declarations, and connecting the nodes requires no manual positioning at all.  Below is an example graph:&lt;/p&gt;
&lt;p&gt;File &lt;tt class="docutils literal"&gt;barber.dot&lt;/tt&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;digraph G {
    subgraph place {
        graph [shape=circle,color=gray];
        node [shape=circle,fixedsize=true,width=2];
        &amp;quot;customer waiting&amp;quot;;
        cutting;
        &amp;quot;idle barber&amp;quot;;
        &amp;quot;customer paying&amp;quot;;
    }
    subgraph transitions {
        node [shape=rect,height=0.2,width=2];
        enter;
        &amp;quot;start cutting&amp;quot;;
        &amp;quot;finish cutting&amp;quot;;
        exit;
    }
    enter -&amp;gt; &amp;quot;customer waiting&amp;quot;;
    &amp;quot;customer waiting&amp;quot; -&amp;gt; &amp;quot;start cutting&amp;quot;;
    &amp;quot;idle barber&amp;quot; -&amp;gt; &amp;quot;start cutting&amp;quot;;
    &amp;quot;start cutting&amp;quot; -&amp;gt; cutting;
    cutting -&amp;gt; &amp;quot;finish cutting&amp;quot;;
    &amp;quot;finish cutting&amp;quot; -&amp;gt; &amp;quot;customer paying&amp;quot;;
    &amp;quot;finish cutting&amp;quot; -&amp;gt; &amp;quot;idle barber&amp;quot;;
    &amp;quot;customer paying&amp;quot; -&amp;gt; exit;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;When run through dot:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
dot -T png barber.dot -o barber.png
&lt;/pre&gt;
&lt;p&gt;...you get an image that looks something like this:&lt;/p&gt;
&lt;img alt="Petri net barber example" src="https://gdub.github.io/thegarywilson.com/blog/2011/drawing-petri-nets/barber.png" /&gt;
&lt;p&gt;However, there doesn't seem to be a very good way for drawing the tokens within the place nodes.  Nodes can define text labels, but using periods for tokens isn't very readable. Alternatively, since nodes can specify a background image, you could generate a few images with different numbers of tokens and use the correct image to represent the desired number of tokens, while still having a text label too.&lt;/p&gt;
&lt;p&gt;If you intend to put your graph into LaTeX, check out the &lt;a class="reference external" href="http://www.fauskes.net/code/dot2tex/"&gt;dot2tex&lt;/a&gt; tool (written in Python) which will convert Graphviz's xdot output to LaTeX using PSTricks and PGF. Not only does this allow you to create beautiful graphs in your LaTeX documents, but it also allows your labels to be typeset by LaTeX (including the use of math mode, which is very nice).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Finally, there's your favorite drawing or image manipulation program. It's quick-and-dirty, but perhaps the easiest solution I examined.  While it might be a pain to edit or reconnect nodes, it's certainly easy to set the positioning you want. If your program supports snapping edges and labels to nodes, such as &lt;a class="reference external" href="http://www.openoffice.org/product/draw.html"&gt;OODraw&lt;/a&gt;, then moving or reconfiguring portions of the graph are even easier.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you've found a better tool for drawing Petri nets, please share your experiences.&lt;/p&gt;
</content><category term="14"></category><category term="distributed systems"></category><category term="grad school"></category><category term="graphviz"></category><category term="latex"></category><category term="modeling"></category><category term="open office"></category><category term="petri nets"></category></entry></feed>