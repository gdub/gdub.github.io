<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Gary Wilson Jr. - dvcs</title><link href="https://thegarywilson.com/" rel="alternate"></link><link href="https://thegarywilson.com/blog/feed/dvcs.atom" rel="self"></link><id>https://thegarywilson.com/</id><updated>2007-01-11T01:08:00-06:00</updated><entry><title>Hacking Django, how Bazaar</title><link href="https://thegarywilson.com/blog/2007/hacking-django-how-bazaar/" rel="alternate"></link><published>2007-01-11T01:08:00-06:00</published><updated>2007-01-11T01:08:00-06:00</updated><author><name>Gary Wilson Jr.</name></author><id>tag:thegarywilson.com,2007-01-11:/blog/2007/hacking-django-how-bazaar/</id><summary type="html">&lt;p&gt;A short while ago, I went on a mission to find a better way to hack &lt;a class="reference external" href="http://www.djangoproject.com/"&gt;Django&lt;/a&gt;.  I needed a way to keep my patches organized and updated.  So, in this article I discuss my experiences with a tool I found to help me achieve these goals...&lt;/p&gt;
&lt;p&gt;Enter &lt;a class="reference external" href="http://bazaar-vcs.org/"&gt;Bazaar&lt;/a&gt;, one …&lt;/p&gt;</summary><content type="html">&lt;p&gt;A short while ago, I went on a mission to find a better way to hack &lt;a class="reference external" href="http://www.djangoproject.com/"&gt;Django&lt;/a&gt;.  I needed a way to keep my patches organized and updated.  So, in this article I discuss my experiences with a tool I found to help me achieve these goals...&lt;/p&gt;
&lt;p&gt;Enter &lt;a class="reference external" href="http://bazaar-vcs.org/"&gt;Bazaar&lt;/a&gt;, one of the several &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Version_control_system#Distributed_version_control"&gt;distributed version control systems&lt;/a&gt; that have been getting some hype recently.  With &lt;a class="reference external" href="http://en.wikipedia.org/wiki/Comparison_of_revision_control_software"&gt;so many to choose from&lt;/a&gt;, why did I choose Bazaar?  Well, maybe it was because of the cool name, or maybe it was the pretty website, or maybe just because it's written in the language I love—&lt;a class="reference external" href="http://www.python.org/"&gt;Python&lt;/a&gt;.  If you are familiar with &lt;a class="reference external" href="http://subversion.tigris.org/"&gt;Subversion&lt;/a&gt;, then you will feel right at home with Bazaar.  This is because Bazaar uses most of the same commands as Subversion (e.g. &lt;tt class="docutils literal"&gt;svn ci = bzr ci&lt;/tt&gt;, &lt;tt class="docutils literal"&gt;svn st = bzr st&lt;/tt&gt;, etc.).&lt;/p&gt;
&lt;p&gt;Following &lt;a class="reference external" href="http://jameswestby.net/tips/tips/hacking-a-project-with-bzr.html"&gt;this guide for hacking an open source project using bzr&lt;/a&gt;, I created a &lt;tt class="docutils literal"&gt;django&lt;/tt&gt; directory to stash my django hacks.  After using svn to check out the latest Django code to a directory named &lt;tt class="docutils literal"&gt;upstream&lt;/tt&gt;, and turning &lt;tt class="docutils literal"&gt;upstream&lt;/tt&gt; into a bzr repository too, it was time to start the real work.  To re-iterate in command line speak, here is what I did:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update:&lt;/strong&gt; The steps below have been updated to reflect changes with bzr commands (versions &amp;gt;=0.15rc2).&lt;/p&gt;
&lt;pre class="literal-block"&gt;
mkdir django
cd django
bzr init-repo .            # use &amp;quot;bzr init-repo --trees .&amp;quot; here instead if using a version &amp;lt;0.15rc2
svn co http://code.djangoproject.com/svn/django/trunk/ upstream
cd upstream
bzr init
echo &amp;quot;.svn&amp;quot; &amp;gt; .bzrignore   # do not store svn metadata in our bzr repo
bzr add
bzr ci -m 'Initial import of Django.'
&lt;/pre&gt;
&lt;p&gt;Usually, when you want to add a new feature to some code, you create a branch.  The purpose of these, so called, feature branches is to keep the features separated.  Trying to create multiple features in the same branch would just be a big mess.  Creating branches in a Subversion repository is easy enough, you just &lt;tt class="docutils literal"&gt;svn cp&lt;/tt&gt; the code to a new location.  It's the keeping your branch in sync with the trunk that's not as easy.&lt;/p&gt;
&lt;p&gt;With Subversion, you have to keep track of the revisions that have already been merged to your branch and make sure to only merge the changes that haven't already been merged.  Not so with Bazaar; Bazaar keeps track of this for you.  A simple &lt;tt class="docutils literal"&gt;bzr merge&lt;/tt&gt; will pull in upstream changes that have not been merged yet.&lt;/p&gt;
&lt;p&gt;So, when I wanted to start working on a patch for &lt;a class="reference external" href="http://code.djangoproject.com/ticket/2473"&gt;ticket #2473&lt;/a&gt;, I created a branch:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
bzr branch upstream in-and-empty-list-2473
&lt;/pre&gt;
&lt;p&gt;After &lt;tt class="docutils literal"&gt;cd&lt;/tt&gt;'ing into my new branch and committing my changes, I created a diff to attach to the ticket with the command:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
bzr diff -r branch:../upstream
&lt;/pre&gt;
&lt;p&gt;So far, working with Bazaar has been a breeze.  Without it, &lt;a class="reference external" href="http://code.djangoproject.com/ticket/2473"&gt;my&lt;/a&gt; &lt;a class="reference external" href="http://code.djangoproject.com/ticket/2756"&gt;Django&lt;/a&gt; &lt;a class="reference external" href="http://code.djangoproject.com/ticket/3180"&gt;holiday&lt;/a&gt; &lt;a class="reference external" href="http://code.djangoproject.com/ticket/3182"&gt;hacking&lt;/a&gt; wouldn't have been nearly as fun.&lt;/p&gt;
</content><category term="writing"></category><category term="bzr"></category><category term="django"></category><category term="dvcs"></category></entry></feed>